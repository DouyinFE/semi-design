//@import '../theme/variables.scss';
// @import '../theme/mixin.scss';
@use "sass:meta";
@use "animation.scss";
@use "variables.scss";
@use "mixin.scss";

$module: #{$prefix}-checkbox;

.#{$module} {
    @include box-sizing;
    // box-sizing: border-box;
    position: relative;
    display: flex;
    align-items: flex-start;
    @include font-size-regular;
    cursor: pointer;
    transition: background-color animation.$transition_duration-checkbox-bg animation.$transition_function-checkbox-bg animation.$transition_delay-checkbox-bg,
    border animation.$transition_duration-checkbox-border animation.$transition_function-checkbox-border animation.$transition_delay-checkbox-border;
    transform: scale(animation.$transform_scale-checkbox);
    column-gap: variables.$spacing-checkbox_label-paddingLeft;

    input[type="checkbox"] {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        margin: 0;
        opacity: 0;
    }

    &-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        row-gap: variables.$spacing-checkbox_extra-marginTop;
    }

    &-addon {
        display: flex;
        flex: 1;
        align-items: center;
        color: variables.$color-checkbox_label-text-default;
        line-height: variables.$font-checkbox_label-lineHeight;
        user-select: none;
    }

    &:hover {
        .#{$module}-inner-display {
            background: variables.$color-checkbox_default-bg-hover;
            box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_default-border-hover;
        }

        .#{$module}-inner-checked {
            .#{$module}-inner-display {
                background: variables.$color-checkbox_checked-bg-hover;
                box-shadow: none;
            }
        }
    }

    &:active {
        .#{$module}-inner-display {
            background: variables.$color-checkbox_default-bg-active;
        }

        .#{$module}-inner-checked {
            .#{$module}-inner-display {
                background: variables.$color-checkbox_checked-bg-active;
                box-shadow: none;
            }
        }
    }

    &.#{$module}-disabled:hover,
    &.#{$module}-disabled:active {
        .#{$module}-inner-display {
            background: variables.$color-checkbox_disabled-bg-default;
            box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_disabled-border-default;
        }

        .#{$module}-inner-checked {
            .#{$module}-inner-display {
                color: variables.$color-checkbox_checked-icon-disabled;
                background: variables.$color-checkbox_checked-bg-disabled;
                box-shadow: none;
            }
        }
    }

    &-inner {
        position: relative;
        display: flex;
        align-items: center;
        width: variables.$width-checkbox_inner;
        height: variables.$height-checkbox_inner;
        user-select: none; // prevent text under it will be selected when double click
        cursor: pointer;

        &-display {
            @include box-sizing;
            position: relative;
            width: variables.$width-checkbox_inner;
            height: variables.$width-checkbox_inner;
            margin: 0;
            background: variables.$color-checkbox_default-bg-default;
            transition: background-color animation.$transition_duration-checkbox-bg animation.$transition_function-checkbox-bg animation.$transition_delay-checkbox-bg,
                border animation.$transition_duration-checkbox-border animation.$transition_function-checkbox-border animation.$transition_delay-checkbox-border;

            box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_default-border-default;
            border-radius: variables.$radius-checkbox_inner;

            .#{$prefix}-icon {
                font-size: 16px;
            }
        }
    }

    &-inner-checked {
        .#{$module}-inner-display {
            background: variables.$color-checkbox_checked-bg-default;
            color: variables.$color-checkbox_checked-icon-default;

            box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_checked-border-default;
            border-radius: variables.$radius-checkbox_inner;
        }

        &>.#{$module}-addon {
            color: variables.$color-checkbox_label-text-default;
        }
    }

    &:hover {
        .#{$module}-inner-display {
            background: variables.$color-checkbox_default-bg-hover;
        }

        &.#{$module}-indeterminate .#{$module}-inner-display {
            background: variables.$color-checkbox_checked-bg-hover;
            box-shadow: none;
            color: variables.$color-checkbox_checked-icon-hover;
        }

        .#{$module}-inner-checked {
            .#{$module}-inner-display {
                background: variables.$color-checkbox_checked-bg-hover;
                border-color: variables.$color-checkbox_checked-border-hover;
                color: variables.$color-checkbox_checked-icon-hover;
            }
        }

        &.#{$module}-cardType.#{$module}-unChecked.#{$module}-cardType_enable {
            .#{$module}-inner-display {
                background: variables.$color-checkbox_cardType_inner-bg-hover;
            }
        }
    }

    &:active {
        .#{$module}-inner-display {
            background: variables.$color-checkbox_default-bg-active;
        }

        &.#{$module}-indeterminate .#{$module}-inner-display {
            background: variables.$color-checkbox_checked-bg-active;
            border-color: variables.$color-checkbox_checked-border-active;
            color: variables.$color-checkbox_checked-icon-active;
            box-shadow: none;
        }

        .#{$module}-inner-checked {
            .#{$module}-inner-display {
                background: variables.$color-checkbox_checked-bg-active;
                border-color: variables.$color-checkbox_checked-border-active;
                color: variables.$color-checkbox_checked-icon-active;
            }
        }

        &.#{$module}-cardType.#{$module}-unChecked.#{$module}-cardType_enable {
            .#{$module}-inner-display {
                background: variables.$color-checkbox_cardType_inner-bg-active;
            }
        }
    }

    &-cardType {
        flex-wrap: nowrap;
        align-items: flex-start;
        border-radius: variables.$radius-checkbox_cardType;
        padding: variables.$spacing-checkbox_cardType-paddingY variables.$spacing-checkbox_cardType-paddingX;
        background: transparent;
        border: variables.$width-checkbox_cardType_checked-border solid variables.$color-checkbox_cardType-border-default;


        .#{$module}-inner {
            position: relative;
            flex-shrink: 0;

            &-display {
                background: variables.$color-checkbox_cardType_inner-bg-default;
            }
        }

        .#{$module}-inner-pureCardType {
            // Reasons to use opacity:0 & width: 0 instead of display: none
            // The a11y keyboard focus event of the checkbox depends on the implementation of the input focus/blur event
            // input focus/blur cannot take effect when display: none
            opacity: 0;
            width: 0;
        }

        .#{$module}-addon {
            font-weight: variables.$font-checkbox_cardType_addon-fontWeight;
            font-size: variables.$font-checkbox_cardType_addon-size;
            line-height: variables.$font-checkbox_cardType_addon-lineHeight;
            color: variables.$color-checkbox_cardType_addon-text-default;
        }

        .#{$module}-extra {
            font-weight: variables.$font-checkbox_cardType_extra-fontWeight;
            font-size: variables.$font-checkbox_cardType_extra-size;
            line-height: variables.$font-checkbox_cardType_extra-lineHeight;
            color: variables.$color-checkbox_cardType_extra-text-default;

            &.#{$module}-cardType_extra_noChildren {
                margin-top: 0;
            }
        }

        &:hover {
            background: variables.$color-checkbox_cardType-bg-hover;
        }

        &:active {
            background: variables.$color-checkbox_cardType-bg-active;
        }

        &_checked {
            background: variables.$color-checkbox_cardType_checked-bg;
            border: variables.$width-checkbox_cardType_checked-border solid variables.$color-checkbox_cardType_checked_border-default;

            &:hover {
                background: variables.$color-checkbox_cardType_checked-bg;
                border-color: variables.$color-checkbox_cardType_checked_border-hover;

                .#{$module}-inner-checked .#{$module}-inner-display {
                    box-shadow: none;
                }
            }

            &:active {
                background: variables.$color-checkbox_cardType_checked-bg;
                border-color: variables.$color-checkbox_cardType_checked_border-active;
            }
        }

        &_disabled {
            &:active {
                background: transparent;
            }

            &:hover {
                background: transparent;
            }
        }

        &_checked_disabled.#{$module}-cardType {
            background: variables.$color-checkbox_cardType_checked_disabled-bg;
            border: variables.$width-checkbox_cardType_checked_disabled-border solid variables.$color-checkbox_cardType_checked_disabled_border-default;

            &:hover {
                .#{$module}-inner-checked .#{$module}-inner-display {
                    box-shadow: none;
                }
            }
        }
    }

    &-indeterminate,
    &-checked {
        .#{$module}-inner {

            &-display {
                background: variables.$color-checkbox_checked-bg-default;
                color: variables.$color-checkbox_checked-icon-default;

                box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_checked-border-default;
                border-radius: variables.$radius-checkbox_inner;

                &:hover {
                    background: variables.$color-checkbox_checked-bg-hover;
                    border-color: variables.$color-checkbox_checked-border-hover;
                    color: variables.$color-checkbox_checked-icon-hover;
                }

                &:active {
                    background: variables.$color-checkbox_checked-bg-active;
                    border-color: variables.$color-checkbox_checked-border-active;
                    color: variables.$color-checkbox_checked-icon-active;
                }
            }

            &-addon {
                color: variables.$color-checkbox_label-text-default;
            }
        }
    }

    &-disabled {
        cursor: not-allowed;

        .#{$module}-inner {
            cursor: not-allowed;

            &-display {
                color: variables.$color-checkbox_checked-icon-disabled;
                background: variables.$color-checkbox_disabled-bg-default;
                box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_disabled-border-default;

                &:hover {
                    color: variables.$color-checkbox_checked-icon-disabled;
                    background: transparent;
                }
            }

            &-checked {
                color: variables.$color-checkbox_checked-icon-disabled;

                .#{$module}-inner-display {
                    opacity: 0.75;
                    background: variables.$color-checkbox_checked-bg-disabled;
                    box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_checked-bg-disabled;

                    &:hover {
                        color: variables.$color-checkbox_checked-icon-disabled;
                        background: variables.$color-checkbox_checked-bg-disabled;
                    }
                }
            }
        }

        .#{$module}-addon {
            color: variables.$color-checkbox_label-text-disabled;
        }

        .#{$module}-extra {
            color: variables.$color-checkbox_label-text-disabled;
        }
    }

    &.#{$module}-disabled.#{$module}-indeterminate .#{$module}-inner-display {
        opacity: 0.75;
        background: variables.$color-checkbox_checked-bg-disabled;
        box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_checked-bg-disabled;
        color: variables.$color-checkbox_checked-icon-disabled;
    }

    &-extra {
        flex-shrink: 0;
        flex-grow: 1;
        flex-basis: 100%;
        box-sizing: border-box;
        color: variables.$color-checkbox_extra-text-default;
    }

    &-focus {
        outline: variables.$width-checkbox-outline solid variables.$color-checkbox_primary-outline-focus;

        &-border {
            box-shadow: inset 0 0 0 variables.$size-checkbox_inner-shadow variables.$color-checkbox_default-border-hover;
        }
    }
}

.#{$module}Group {
    @include font-size-regular;
    // make sure group height 32px
    line-height: $font-size-regular;

    .#{$module} {
        &.#{$module}-vertical {
            margin-bottom: variables.$spacing-checkbox_group_vertical-marginBottom;
        }
    }

    &-horizontal {
        display: flex;
        flex-wrap: wrap;
        gap: variables.$spacing-checkbox_group_horizontal-marginRight;

        .#{$module} {
            display: inline-flex;
        }
    }

    &-vertical {
        display: flex;
        flex-direction: column;
        row-gap: variables.$spacing-checkbox_group_vertical_item-marginBottom;

        &-cardType {
            row-gap: variables.$spacing-checkbox_card_group_vertical-marginBottom;
        }


        &-pureCardType {
            .#{$module} {
                column-gap: 0;
            }
        }
    }
}

@include meta.load-css("rtl.scss");
